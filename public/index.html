<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9JA LUXURY life hotel - Dashboard</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Complete hotel management system for bookings, kitchen, bar, and customer management">
    <meta name="theme-color" content="#2c3e50">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Hotel Manager">
    <meta name="msapplication-TileColor" content="#2c3e50">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- Cache Prevention -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0")>
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/logo.png">
    <link rel="mask-icon" href="/icons/logo.png" color="#D4AF37">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-hotel"></i> 9JA LUXURY life hotel</h1>
                    <p class="header-subtitle">Complete Hotel Management System</p>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle-btn" onclick="toggleTheme()" title="Toggle Dark/Light Theme">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                    <button class="btn btn-primary" onclick="window.location.href='/staff-login.html'" title="Staff Login">
                        <i class="fas fa-sign-in-alt"></i> Staff Login
                    </button>
                    <button class="btn btn-secondary" onclick="refreshAllData()" title="Refresh Data">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn btn-warning" onclick="location.reload(true)" title="Force Reload Page">
                        <i class="fas fa-redo"></i> Hard Refresh
                    </button>
                    <button class="btn btn-success" onclick="window.location.href='/admin'" title="Admin Dashboard">
                        <i class="fas fa-chart-line"></i> Admin Dashboard
                    </button>
                    <button class="btn btn-danger" onclick="logoutStaff()" title="Logout (Ctrl+L)" tabindex="0" accesskey="l">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Category Overview Page -->
        <div id="categoryOverview" class="category-overview">
            <div class="welcome-section">
                <h2>Hotel Management Dashboard</h2>
                <p>Select a category below to manage your hotel operations</p>
            </div>
            
            <div class="category-grid">
                <!-- Rooms Management -->
                <div class="category-card" onclick="showCategory('rooms')">
                    <div class="category-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <h3>Rooms Management</h3>
                    <p>Room bookings, availability, and status management</p>
                    <div class="category-stats">
                        <span id="roomsAvailable">0 available</span>
                    </div>
                </div>

                <!-- Customer Management -->
                <div class="category-card" onclick="showCategory('customers')">
                    <div class="category-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Customer Management</h3>
                    <p>Guest profiles, preferences, and history</p>
                    <div class="category-stats">
                        <span id="totalCustomers">0 customers</span>
                    </div>
                </div>

                <!-- Bar Operations -->
                <div class="category-card" onclick="showCategory('bar')">
                    <div class="category-icon">
                        <i class="fas fa-wine-glass"></i>
                    </div>
                    <h3>Bar Operations</h3>
                    <p>Inventory management and beverage orders</p>
                    <div class="category-stats">
                        <span id="barItems">0 items</span>
                    </div>
                </div>

                <!-- Kitchen Management -->
                <div class="category-card" onclick="showCategory('kitchen')">
                    <div class="category-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h3>Kitchen Management</h3>
                    <p>Food inventory, orders, and menu management</p>
                    <div class="category-stats">
                        <span id="pendingOrders">0 pending orders</span>
                    </div>
                </div>

                <!-- Financial Management -->
                <div class="category-card" onclick="showCategory('payments')">
                    <div class="category-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <h3>Financial Management</h3>
                    <p>Payments, invoices, and financial reports</p>
                    <div class="category-stats">
                        <span id="dailyRevenue">â‚¦0 today</span>
                    </div>
                </div>

                <!-- Department Finance -->
                <div class="category-card" onclick="showCategory('departments')">
                    <div class="category-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <h3>Department Finance</h3>
                    <p>Department budgets, loans, and inter-dept transactions</p>
                    <div class="category-stats">
                        <span id="departmentLoans">0 active loans</span>
                    </div>
                </div>

                <!-- Security & Reports -->
                <div class="category-card" onclick="showCategory('reports')">
                    <div class="category-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Security & Reports</h3>
                    <p>Incident reports, security logs, and documentation</p>
                    <div class="category-stats">
                        <span id="activeReports">0 active reports</span>
                    </div>
                </div>

                <!-- Staff Management -->
                <div class="category-card" onclick="showCategory('staff')">
                    <div class="category-icon">
                        <i class="fas fa-users-cog"></i>
                    </div>
                    <h3>Staff Management</h3>
                    <p>Employee schedules, tasks, and performance</p>
                    <div class="category-stats">
                        <span id="staffOnDuty">0 on duty</span>
                    </div>
                </div>

                <!-- Housekeeping -->
                <div class="category-card" onclick="showCategory('housekeeping')">
                    <div class="category-icon">
                        <i class="fas fa-broom"></i>
                    </div>
                    <h3>Housekeeping</h3>
                    <p>Room cleaning, maintenance, and supplies</p>
                    <div class="category-stats">
                        <span id="cleaningTasks">0 pending tasks</span>
                    </div>
                </div>

                <!-- Notifications & Alerts -->
                <div class="category-card" onclick="showCategory('notifications')">
                    <div class="category-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h3>Notifications & Alerts</h3>
                    <p>System alerts, reminders, and communications</p>
                    <div class="category-stats">
                        <span id="unreadNotifications">0 unread</span>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategory('laundry')">
                    <div class="category-icon">
                        <i class="fas fa-soap"></i>
                    </div>
                    <h3>Laundry Service</h3>
                    <p>Manage laundry tasks, pickup, and delivery</p>
                    <div class="category-stats">
                        <span id="laundryTasksCount">0 active tasks</span>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategory('stock')">
                    <div class="category-icon">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <h3>Stock & Inventory</h3>
                    <p>Inventory valuation, suppliers, and stock management</p>
                    <div class="category-stats">
                        <span id="stockValueDisplay">â‚¦0 total value</span>
                    </div>
                </div>

                <!-- Guest Order Management -->
                <div class="category-card" onclick="showCategory('guest-orders')">
                    <div class="category-icon">
                        <i class="fas fa-concierge-bell"></i>
                    </div>
                    <h3>Guest Order Management</h3>
                    <p>Food orders, room service, and guest requests</p>
                    <div class="category-stats">
                        <span id="guestOrdersCount">0 active orders</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Detail Pages (Hidden by default) -->
        <div id="categoryDetail" class="category-detail" style="display: none;">
            <div class="category-header">
                <button class="btn btn-secondary back-btn" onclick="showOverview()">
                    <i class="fas fa-arrow-left"></i> Back to Overview
                </button>
                <h2 id="categoryTitle">Category</h2>
            </div>
            
            <div class="category-content">
                <!-- Original tab content will be moved here dynamically -->
                <div id="detailContent"></div>
            </div>
        </div>

        <!-- Keep existing tab structure hidden for functionality -->
        <div style="display: none;">
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="rooms">
                    <i class="fas fa-bed"></i> Rooms
                </button>
                <button class="tab-btn" data-tab="customers">
                    <i class="fas fa-users"></i> Customers
                </button>
                <button class="tab-btn" data-tab="bar">
                    <i class="fas fa-wine-glass"></i> Bar
                </button>
                <button class="tab-btn" data-tab="kitchen">
                    <i class="fas fa-utensils"></i> Kitchen
                </button>
                <button class="tab-btn" data-tab="guest-orders">
                    <i class="fas fa-user-friends"></i> Guest Orders
                </button>
                <button class="tab-btn" data-tab="reports">
                    <i class="fas fa-shield-alt"></i> Security
                </button>
                <button class="tab-btn" data-tab="payments">
                    <i class="fas fa-credit-card"></i> Payments
                </button>
                <button class="tab-btn" data-tab="notifications">
                    <i class="fas fa-bell"></i> Alerts
                </button>
                <button class="tab-btn" data-tab="staff">
                    <i class="fas fa-users-cog"></i> Staff
                </button>
                <button class="tab-btn" data-tab="housekeeping">
                    <i class="fas fa-broom"></i> Housekeeping
                </button>
                <button class="tab-btn" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i> Analytics
                </button>
                <button class="tab-btn" data-tab="services">
                    <i class="fas fa-concierge-bell"></i> Services
                </button>
                <button class="tab-btn" data-tab="laundry">
                    <i class="fas fa-soap"></i> Laundry
                </button>
                <button class="tab-btn" data-tab="scanpay">
                    <i class="fas fa-qrcode"></i> Scan & Pay
                </button>
                <button class="tab-btn" data-tab="hr">
                    <i class="fas fa-user-tie"></i> HR
                </button>
                <button class="tab-btn" data-tab="stock">
                    <i class="fas fa-boxes"></i> Stock Control
                </button>
                <button class="tab-btn" data-tab="messaging">
                    <i class="fas fa-envelope-open-text"></i> Messaging
                </button>
                <button class="tab-btn" data-tab="locations">
                    <i class="fas fa-map-marker-alt"></i> Locations
                </button>
                <button class="tab-btn" data-tab="communication">
                    <i class="fas fa-comments"></i> Communication
                </button>
            </nav>
        </header>

        <main class="main-content">
            <!-- Rooms Tab -->
            <div id="rooms" class="tab-content active">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-bed"></i>
                        Room Management
                        <span class="badge" id="roomsCount">11 Rooms</span>
                    </h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="loadRooms()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-primary" onclick="showBookingModal()">
                            <i class="fas fa-plus"></i> New Booking
                        </button>
                    </div>
                </div>
                <div class="rooms-grid" id="roomsGrid">
                    <!-- Rooms will be loaded here -->
                </div>
            </div>
            <!-- Restored missing tab-content sections so each tab button has a matching content area -->

            <!-- Customers Tab -->
            <div id="customers" class="tab-content">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-users"></i>
                        Customer Management
                        <span class="badge" id="customersCount">0 Customers</span>
                    </h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="loadCustomers()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-primary" onclick="showCustomerModal()">
                            <i class="fas fa-user-plus"></i> Add Customer
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="customers-table" id="customersTable">
                        <thead>
                            <tr>
                                <th>Customer ID <small>(For Guest Portal)</small></th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Room</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Customers will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Bar Tab -->
            <div id="bar" class="tab-content">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-wine-glass-alt"></i>
                        Bar & Lounge Management
                    </h2>
                </div>
                
                <!-- Bar Sub-tabs -->
                <div class="bar-tabs">
                    <button class="bar-tab-btn active" data-bar-tab="inventory">
                        <i class="fas fa-boxes"></i> Bar Inventory
                    </button>
                    <button class="bar-tab-btn" data-bar-tab="lounge">
                        <i class="fas fa-building"></i> Lounge Rentals
                    </button>
                    <button class="bar-tab-btn" data-bar-tab="events">
                        <i class="fas fa-calendar-alt"></i> Event Calendar
                    </button>
                </div>

                <!-- Bar Inventory Sub-tab -->
                <div id="bar-inventory" class="bar-tab-content active">
                    <div class="section-header">
                        <h3>Bar Inventory</h3>
                        <button class="btn btn-primary" onclick="showBarItemModal()">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>
                    <div class="inventory-grid" id="barInventory">
                        <!-- Bar inventory will be loaded here -->
                    </div>
                </div>

                <!-- Lounge Rentals Sub-tab -->
                <div id="bar-lounge" class="bar-tab-content">
                    <div class="section-header">
                        <h3>Lounge Bookings</h3>
                        <div class="header-actions">
                            <button class="btn btn-secondary" onclick="loadLoungeBookings()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn btn-success" onclick="showLoungePricingModal()">
                                <i class="fas fa-calculator"></i> Price Calculator
                            </button>
                            <button class="btn btn-primary" onclick="showLoungeBookingModal()">
                                <i class="fas fa-plus"></i> New Booking
                            </button>
                        </div>
                        </div>
                    </div>
                    
                    <!-- Lounge Overview Cards -->
                    <div class="lounge-overview">
                        <div class="lounge-card">
                            <h4><i class="fas fa-calendar-check"></i> This Month</h4>
                            <div class="lounge-stat" id="monthlyBookings">0 Bookings</div>
                        </div>
                        <div class="lounge-card">
                            <h4><i class="fas fa-dollar-sign"></i> Monthly Revenue</h4>
                            <div class="lounge-stat" id="monthlyLoungeRevenue">â‚¦0.00</div>
                        </div>
                        <div class="lounge-card">
                            <h4><i class="fas fa-clock"></i> Today's Events</h4>
                            <div class="lounge-stat" id="todayEvents">0 Events</div>
                        </div>
                        <div class="lounge-card">
                            <h4><i class="fas fa-hourglass-half"></i> Pending</h4>
                            <div class="lounge-stat" id="pendingBookings">0 Pending</div>
                        </div>
                    </div>

                    <!-- Lounge Bookings Table -->
                    <div class="table-container">
                        <table class="lounge-bookings-table" id="loungeBookingsTable">
                            <thead>
                                <tr>
                                    <th>Booking ID</th>
                                    <th>Event Name</th>
                                    <th>Customer</th>
                                    <th>Event Type</th>
                                    <th>Date & Time</th>
                                    <th>Guests</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Lounge bookings will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Event Calendar Sub-tab -->
                <div id="bar-events" class="bar-tab-content">
                    <div class="section-header">
                        <h3>Event Calendar</h3>
                        <div class="header-actions">
                            <button class="btn btn-secondary" onclick="refreshEventCalendar()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="calendar-container">
                        <div id="eventCalendar">
                            <!-- Calendar will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kitchen Tab -->
            <div id="kitchen" class="tab-content">
                <div class="kitchen-dashboard">
                    <!-- Kitchen Overview Cards -->
                    <div class="kitchen-overview">
                        <div class="kitchen-card">
                            <h3><i class="fas fa-dollar-sign"></i> Today's Costs</h3>
                            <div class="kitchen-stat" id="todayCosts">â‚¦0.00</div>
                        </div>
                        <div class="kitchen-card">
                            <h3><i class="fas fa-chart-line"></i> Monthly Budget</h3>
                            <div class="kitchen-stat" id="monthlyBudget">â‚¦0.00</div>
                        </div>
                        <div class="kitchen-card">
                            <h3><i class="fas fa-exclamation-triangle"></i> Low Stock Items</h3>
                            <div class="kitchen-stat" id="lowStockCount">0</div>
                        </div>
                    </div>

                    <!-- Kitchen Tabs -->
                    <div class="kitchen-tabs">
                        <button class="kitchen-tab-btn active" data-kitchen-tab="inventory">
                            <i class="fas fa-boxes"></i> Inventory
                        </button>
                        <button class="kitchen-tab-btn" data-kitchen-tab="orders">
                            <i class="fas fa-utensils"></i> Orders
                        </button>
                        <button class="kitchen-tab-btn" data-kitchen-tab="purchases">
                            <i class="fas fa-shopping-cart"></i> Purchases
                        </button>
                        <button class="kitchen-tab-btn" data-kitchen-tab="costs">
                            <i class="fas fa-calculator"></i> Cost Analysis
                        </button>
                    </div>

                    <!-- Kitchen Inventory Tab -->
                    <div id="kitchen-inventory" class="kitchen-tab-content active">
                        <div class="section-header">
                            <h3>Kitchen Inventory</h3>
                            <button class="btn btn-primary" onclick="showKitchenItemModal()">
                                <i class="fas fa-plus"></i> Add Item
                            </button>
                        </div>
                        <div class="kitchen-inventory-grid">
                            <table class="kitchen-table">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Category</th>
                                        <th>Current Stock</th>
                                        <th>Unit</th>
                                        <th>Cost per Unit</th>
                                        <th>Total Value</th>
                                        <th>Min. Stock</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="kitchenInventoryTable">
                                    <!-- Kitchen inventory will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Kitchen Orders Tab -->
                    <div id="kitchen-orders" class="kitchen-tab-content">
                        <div class="section-header">
                            <h3>Kitchen Orders</h3>
                            <button class="btn btn-primary" onclick="showOrderModal()">
                                <i class="fas fa-plus"></i> New Order
                            </button>
                        </div>
                        <div class="orders-container" id="kitchenOrders">
                            <!-- Kitchen orders will be loaded here -->
                        </div>
                    </div>

                    <!-- Kitchen Purchases Tab -->
                    <div id="kitchen-purchases" class="kitchen-tab-content">
                        <div class="section-header">
                            <h3>Purchase History</h3>
                            <button class="btn btn-success" onclick="showPurchaseModal()">
                                <i class="fas fa-plus"></i> Record Purchase
                            </button>
                        </div>
                        <div class="purchases-container">
                            <table class="kitchen-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Supplier</th>
                                        <th>Items</th>
                                        <th>Total Cost</th>
                                        <th>Payment Method</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="purchaseHistoryTable">
                                    <!-- Purchase history will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Kitchen Cost Analysis Tab -->
                    <div id="kitchen-costs" class="kitchen-tab-content">
                        <div class="section-header">
                            <h3>Cost Analysis & Reports</h3>
                            <div class="cost-period-selector">
                                <select id="costPeriod">
                                    <option value="today">Today</option>
                                    <option value="week">This Week</option>
                                    <option value="month" selected>This Month</option>
                                    <option value="quarter">This Quarter</option>
                                </select>
                                <button class="btn btn-info" onclick="generateCostReport()">
                                    <i class="fas fa-file-alt"></i> Generate Report
                                </button>
                            </div>
                        </div>
                        <div class="cost-analysis-grid">
                            <div class="cost-summary-cards">
                                <div class="cost-card">
                                    <h4>Total Purchases</h4>
                                    <div class="cost-amount" id="totalPurchases">â‚¦0.00</div>
                                </div>
                                <div class="cost-card">
                                    <h4>Food Cost %</h4>
                                    <div class="cost-percentage" id="foodCostPercentage">0%</div>
                                </div>
                                <div class="cost-card">
                                    <h4>Waste Cost</h4>
                                    <div class="cost-amount" id="wasteCost">â‚¦0.00</div>
                                </div>
                                <div class="cost-card">
                                    <h4>Average Daily Cost</h4>
                                    <div class="cost-amount" id="avgDailyCost">â‚¦0.00</div>
                                </div>
                            </div>
                            <div class="cost-chart-container">
                                <canvas id="costChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
                <div class="section-header">
                    <h2>Security Reports</h2>
                    <button class="btn btn-primary" onclick="showPoliceReportModal()">
                        <i class="fas fa-plus"></i> New Report
                    </button>
                </div>
                <div class="reports-container" id="policeReports">
                    <!-- Reports will be loaded here -->
                </div>
            </div>

            <!-- Payments Tab -->
            <div id="payments" class="tab-content">
                <div class="section-header">
                    <h2>Payments</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showPaymentModal()">
                            <i class="fas fa-plus"></i> New Payment
                        </button>
                    </div>
                </div>
                <div class="payments-stats">
                    <div class="stat">
                        <div class="amount" id="todaysSales">â‚¦0.00</div>
                        <div class="label">Today's Sales</div>
                    </div>
                    <div class="stat">
                        <div class="count" id="totalTransactions">0</div>
                        <div class="label">Transactions</div>
                    </div>
                    <div class="stat">
                        <div class="amount" id="avgTransaction">â‚¦0.00</div>
                        <div class="label">Avg Transaction</div>
                    </div>
                </div>
                <div class="transactions-list" id="transactionsList">
                    <!-- Transactions will be loaded here -->
                </div>
            </div>

            <!-- Notifications Tab -->
            <div id="notifications" class="tab-content">
                <div class="section-header">
                    <h2>Alerts & Notifications</h2>
                </div>
                <div class="notifications-list" id="notificationsList">
                    <!-- Notifications will be loaded here -->
                </div>
            </div>

            <!-- Staff Tab -->
            <div id="staff" class="tab-content">
                <div class="section-header">
                    <h2>Staff Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showStaffModal()">
                            <i class="fas fa-plus"></i> Add Staff
                        </button>
                        <button class="btn btn-success" onclick="showClockInModal()">
                            <i class="fas fa-clock"></i> Clock In/Out
                        </button>
                        <button class="btn btn-info" onclick="showTimesheetModal()">
                            <i class="fas fa-calendar-check"></i> View Timesheet
                        </button>
                        <button class="btn btn-warning" onclick="testStaffStatus()">
                            <i class="fas fa-bug"></i> Debug Status
                        </button>
                    </div>
                </div>
                
                <!-- Clock-In System -->
                <div class="clock-in-system">
                    <h3>Quick Clock In/Out</h3>
                    <div class="quick-clock">
                        <input type="text" id="quickPersonalId" placeholder="Enter Personal ID (e.g., EMP001)" class="quick-input">
                        <div class="clock-buttons">
                            <button class="btn btn-success" onclick="quickClock('clock-in')">
                                <i class="fas fa-sign-in-alt"></i> Clock In
                            </button>
                            <button class="btn btn-warning" onclick="quickClock('break-start')">
                                <i class="fas fa-coffee"></i> Start Break
                            </button>
                            <button class="btn btn-info" onclick="quickClock('break-end')">
                                <i class="fas fa-play"></i> End Break
                            </button>
                            <button class="btn btn-danger" onclick="quickClock('clock-out')">
                                <i class="fas fa-sign-out-alt"></i> Clock Out
                            </button>
                        </div>
                    </div>
                    <div class="current-status" id="currentStaffStatus">
                        <!-- Current staff status will be loaded here -->
                    </div>
                </div>

                <div class="staff-dashboard">
                    <div class="staff-stats">
                        <div class="stat-card">
                            <div class="count" id="onDutyCount">0</div>
                            <div class="label">On Duty</div>
                        </div>
                        <div class="stat-card">
                            <div class="count" id="totalStaffCount">0</div>
                            <div class="label">Total Staff</div>
                        </div>
                        <div class="stat-card">
                            <div class="count" id="onBreakCount">0</div>
                            <div class="label">On Break</div>
                        </div>
                        <div class="stat-card">
                            <div class="count" id="offDutyCount">0</div>
                            <div class="label">Off Duty</div>
                        </div>
                    </div>
                    <div class="staff-list" id="staffList">
                        <!-- Staff will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Housekeeping Tab -->
            <div id="housekeeping" class="tab-content">
                <div class="section-header">
                    <h2>Housekeeping</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showCleaningModal()">
                            <i class="fas fa-plus"></i> New Cleaning Task
                        </button>
                    </div>
                </div>
                <div class="housekeeping-tabs">
                    <div id="cleaning" class="hk-tab-content active">
                        <div class="cleaning-tasks" id="cleaningTasks"></div>
                    </div>
                    <div id="maintenance" class="hk-tab-content">
                        <div class="maintenance-requests" id="maintenanceRequests"></div>
                    </div>
                    <div id="supplies" class="hk-tab-content">
                        <div class="supply-inventory" id="supplyInventory"></div>
                    </div>
                </div>
                <div class="housekeeping-stats">
                    <div class="count" id="roomsToClean">0</div>
                    <div class="count" id="maintenanceIssues">0</div>
                    <div class="count" id="lowStockItems">0</div>
                </div>
            </div>

            <!-- Guest Orders Tab -->
            <div id="guest-orders" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-user-friends"></i> Guest Orders Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-success" onclick="refreshGuestOrders()">
                            <i class="fas fa-sync"></i> Refresh Orders
                        </button>
                        <select id="guestOrderFilter" onchange="filterGuestOrders()">
                            <option value="all">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <select id="guestOrderType" onchange="filterGuestOrders()">
                            <option value="all">All Types</option>
                            <option value="kitchen">Kitchen Orders</option>
                            <option value="room-service">Room Service</option>
                            <option value="housekeeping">Housekeeping</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="amenities">Amenities</option>
                        </select>
                    </div>
                </div>

                <!-- Order Statistics Cards -->
                <div class="guest-order-stats">
                    <div class="stat-card pending">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-content">
                            <h3 id="pendingOrdersCount">0</h3>
                            <p>Pending Orders</p>
                        </div>
                    </div>
                    <div class="stat-card in-progress">
                        <div class="stat-icon"><i class="fas fa-cogs"></i></div>
                        <div class="stat-content">
                            <h3 id="inProgressOrdersCount">0</h3>
                            <p>In Progress</p>
                        </div>
                    </div>
                    <div class="stat-card completed">
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="stat-content">
                            <h3 id="completedOrdersCount">0</h3>
                            <p>Completed Today</p>
                        </div>
                    </div>
                    <div class="stat-card revenue">
                        <div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div>
                        <div class="stat-content">
                            <h3 id="guestOrderRevenue">â‚¦0</h3>
                            <p>Today's Revenue</p>
                        </div>
                    </div>
                </div>

                <!-- Orders Container -->
                <div class="guest-orders-container">
                    <div class="orders-grid" id="guestOrdersList">
                        <!-- Guest orders will be loaded here -->
                        <div class="loading-placeholder">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading guest orders...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="section-header">
                    <h2>Analytics & Reports</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="generateReport()">
                            <i class="fas fa-file-pdf"></i> Generate Report
                        </button>
                        <select id="analyticsTimeframe" onchange="updateAnalytics()">
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="quarter">This Quarter</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>
                </div>
                <div class="analytics-dashboard">
                    <div class="analytics-cards">
                        <div class="analytics-card">
                            <h3>Revenue Forecast</h3>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Occupancy Rate</h3>
                            <div class="chart-container">
                                <canvas id="occupancyChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Customer Loyalty</h3>
                            <div class="chart-container">
                                <canvas id="loyaltyChart"></canvas>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Seasonal Patterns</h3>
                            <div class="chart-container">
                                <canvas id="seasonalChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="analytics-summary">
                        <div class="summary-stats">
                            <div class="summary-card">
                                <h4>Average Daily Rate</h4>
                                <div class="value" id="averageRate">â‚¦0.00</div>
                            </div>
                            <div class="summary-card">
                                <h4>RevPAR</h4>
                                <div class="value" id="revpar">â‚¦0.00</div>
                            </div>
                            <div class="summary-card">
                                <h4>Customer Retention</h4>
                                <div class="value" id="retention">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guest Services Tab -->
            <div id="services" class="tab-content">
                <div class="section-header">
                    <h2>Guest Services & Amenities</h2>
                    <div class="services-actions">
                        <button class="btn btn-primary" onclick="showServiceModal()">
                            <i class="fas fa-plus"></i> New Service Request
                        </button>
                        <button class="btn btn-success" onclick="showFeedbackModal()">
                            <i class="fas fa-comment"></i> Guest Feedback
                        </button>
                        <button class="btn btn-info" onclick="showLostFoundModal()">
                            <i class="fas fa-search"></i> Lost & Found
                        </button>
                    </div>
                </div>
                <div class="services-tabs">
                    <button class="service-tab-btn active" data-service-tab="spa">Spa/Wellness</button>
                    <button class="service-tab-btn" data-service-tab="events">Events</button>
                    <button class="service-tab-btn" data-service-tab="concierge">Concierge</button>
                    <button class="service-tab-btn" data-service-tab="feedback">Feedback</button>
                    <button class="service-tab-btn" data-service-tab="lostfound">Lost & Found</button>
                </div>
                <div class="services-content">
                    <div id="spa" class="service-tab-content active">
                        <div class="spa-bookings" id="spaBookings">
                            <!-- Spa bookings will be loaded here -->
                        </div>
                    </div>
                    <div id="events" class="service-tab-content">
                        <div class="event-bookings" id="eventBookings">
                            <!-- Event bookings will be loaded here -->
                        </div>
                    </div>
                    <div id="concierge" class="service-tab-content">
                        <div class="concierge-requests" id="conciergeRequests">
                            <!-- Concierge requests will be loaded here -->
                        </div>
                    </div>
                    <div id="feedback" class="service-tab-content">
                        <div class="guest-feedback" id="guestFeedback">
                            <!-- Guest feedback will be loaded here -->
                        </div>
                    </div>
                    <div id="lostfound" class="service-tab-content">
                        <div class="lost-found-items" id="lostFoundItems">
                            <!-- Lost & found items will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Communication Hub Tab -->
            <div id="communication" class="tab-content">
                <div class="section-header">
                    <h2>Communication Hub</h2>
                    <div class="communication-actions">
                        <button class="btn btn-primary" onclick="showMessageModal()">
                            <i class="fas fa-envelope"></i> Send Message
                        </button>
                        <button class="btn btn-success" onclick="showCallLogModal()">
                            <i class="fas fa-phone"></i> Log Call
                        </button>
                        <button class="btn btn-warning" onclick="showEmergencyModal()">
                            <i class="fas fa-exclamation-triangle"></i> Emergency
                        </button>
                    </div>
                </div>
                <div class="communication-layout">
                    <div class="message-board">
                        <h3>Internal Messages</h3>
                        <div class="messages-list" id="messagesList">
                            <!-- Messages will be loaded here -->
                        </div>
                    </div>
                    <div class="call-log">
                        <h3>Call Log</h3>
                        <div class="calls-list" id="callsList">
                            <!-- Call logs will be loaded here -->
                        </div>
                    </div>
                    <div class="emergency-contacts">
                        <h3>Emergency Contacts</h3>
                        <div class="emergency-list" id="emergencyList">
                            <!-- Emergency contacts will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Laundry Tab -->
            <div id="laundry" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-soap"></i> Laundry Management</h2>
                    <button class="btn btn-primary" onclick="showLaundryTaskModal()">
                        <i class="fas fa-plus"></i> New Laundry Task
                    </button>
                </div>
                <div class="laundry-tasks-list" id="laundryTasksList">
                    <!-- Laundry tasks will be loaded here -->
                </div>
            </div>

            <!-- Scan & Pay Tab -->
            <div id="scanpay" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-qrcode"></i> Scan & Pay Orders</h2>
                    <button class="btn btn-primary" onclick="showScanPayOrderModal()">
                        <i class="fas fa-plus"></i> New Scan & Pay Order
                    </button>
                </div>
                <div class="scanpay-orders-list" id="scanPayOrdersList">
                    <!-- Scan & Pay orders will be loaded here -->
                </div>
            </div>

            <!-- HR Tab -->
            <div id="hr" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-user-tie"></i> HR Management</h2>
                    <button class="btn btn-primary" onclick="showHRRecordModal()">
                        <i class="fas fa-plus"></i> Add HR Record
                    </button>
                </div>
                <div class="hr-records-list" id="hrRecordsList">
                    <!-- HR records will be loaded here -->
                </div>
            </div>

            <!-- Stock Control Tab -->
            <div id="stock" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-boxes"></i> Stock Management & Valuation</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showStockItemModal()">
                            <i class="fas fa-plus"></i> Add Stock Item
                        </button>
                        <button class="btn btn-info" onclick="showSupplierModal()">
                            <i class="fas fa-truck"></i> Add Supplier
                        </button>
                        <button class="btn btn-success" onclick="showStockValuationModal()">
                            <i class="fas fa-chart-bar"></i> View Valuation
                        </button>
                    </div>
                </div>

                <!-- Stock Overview Cards -->
                <div class="stock-overview">
                    <div class="stock-card">
                        <h3><i class="fas fa-dollar-sign"></i> Total Stock Value</h3>
                        <div class="stock-value" id="totalStockValue">â‚¦0</div>
                        <small>Current inventory worth</small>
                    </div>
                    <div class="stock-card">
                        <h3><i class="fas fa-chart-line"></i> After Sales Value</h3>
                        <div class="stock-value" id="afterSalesValue">â‚¦0</div>
                        <small>Potential revenue</small>
                    </div>
                    <div class="stock-card">
                        <h3><i class="fas fa-percentage"></i> Profit Margin</h3>
                        <div class="stock-value" id="profitMargin">0%</div>
                        <small>Average markup</small>
                    </div>
                    <div class="stock-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> Low Stock Alert</h3>
                        <div class="stock-value" id="lowStockAlert">0</div>
                        <small>Items need restocking</small>
                    </div>
                </div>

                <!-- Navigation Tabs -->
                <div class="stock-nav-tabs">
                    <button class="stock-nav-btn active" data-stock-tab="inventory">
                        <i class="fas fa-boxes"></i> Inventory
                    </button>
                    <button class="stock-nav-btn" data-stock-tab="suppliers">
                        <i class="fas fa-truck"></i> Suppliers
                    </button>
                    <button class="stock-nav-btn" data-stock-tab="valuation">
                        <i class="fas fa-chart-bar"></i> Valuation
                    </button>
                    <button class="stock-nav-btn" data-stock-tab="sales">
                        <i class="fas fa-shopping-cart"></i> Sales Tracking
                    </button>
                </div>

                <!-- Inventory Tab -->
                <div id="stockInventoryTab" class="stock-tab-content active">
                    <div class="stock-items-list" id="stockItemsList">
                        <!-- Stock items will be loaded here -->
                    </div>
                </div>

                <!-- Suppliers Tab -->
                <div id="stockSuppliersTab" class="stock-tab-content">
                    <div class="suppliers-list" id="suppliersList">
                        <!-- Suppliers will be loaded here -->
                    </div>
                </div>

                <!-- Valuation Tab -->
                <div id="stockValuationTab" class="stock-tab-content">
                    <div class="valuation-summary" id="valuationSummary">
                        <!-- Valuation details will be loaded here -->
                    </div>
                </div>

                <!-- Sales Tracking Tab -->
                <div id="stockSalesTab" class="stock-tab-content">
                    <div class="sales-tracking" id="salesTracking">
                        <!-- Sales data will be loaded here -->
                    </div>
                </div>

                <div class="stock-transfer-section">
                    <h3>Stock Transfers</h3>
                    <button class="btn btn-info" onclick="showStockTransferModal()">
                        <i class="fas fa-exchange-alt"></i> Transfer Stock
                    </button>
                    <div class="stock-transfers-list" id="stockTransfersList">
                        <!-- Stock transfers will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Messaging Tab -->
            <div id="messaging" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-envelope-open-text"></i> Automated Messaging</h2>
                    <button class="btn btn-primary" onclick="showAutomatedMessageModal()">
                        <i class="fas fa-plus"></i> New Automated Message
                    </button>
                </div>
                <div class="automated-messages-list" id="automatedMessagesList">
                    <!-- Automated messages will be loaded here -->
                </div>
            </div>

            <!-- Locations Tab -->
            <div id="locations" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-map-marker-alt"></i> Locations & Branches</h2>
                    <button class="btn btn-primary" onclick="showLocationBranchModal()">
                        <i class="fas fa-plus"></i> Add Location/Branch
                    </button>
                </div>
                <div class="location-branches-list" id="locationBranchesList">
                    <!-- Location branches will be loaded here -->
                </div>
            </div>

            <!-- Department Finance Tab -->
            <div id="departments" class="tab-content">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-building"></i>
                        Department Finance Management
                        <span class="badge" id="departmentsCount">0 Departments</span>
                    </h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="loadDepartments()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-primary" onclick="showDepartmentModal()">
                            <i class="fas fa-plus"></i> New Department
                        </button>
                    </div>
                </div>

                <!-- Department Finance Sub-tabs -->
                <div class="sub-tabs">
                    <button class="sub-tab-btn active" onclick="showDepartmentSubTab('overview')">
                        <i class="fas fa-chart-pie"></i> Overview
                    </button>
                    <button class="sub-tab-btn" onclick="showDepartmentSubTab('departments')">
                        <i class="fas fa-building"></i> Departments
                    </button>
                    <button class="sub-tab-btn" onclick="showDepartmentSubTab('loans')">
                        <i class="fas fa-handshake"></i> Loans
                    </button>
                    <button class="sub-tab-btn" onclick="showDepartmentSubTab('assignments')">
                        <i class="fas fa-clipboard-list"></i> Payment Assignments
                    </button>
                    <button class="sub-tab-btn" onclick="showDepartmentSubTab('transactions')">
                        <i class="fas fa-exchange-alt"></i> Transactions
                    </button>
                </div>

                <!-- Department Overview -->
                <div id="dept-overview" class="sub-tab-content active">
                    <div class="dept-stats-grid">
                        <div class="dept-stat-card">
                            <div class="dept-stat-icon"><i class="fas fa-building"></i></div>
                            <div class="dept-stat-content">
                                <h3 id="totalDepartments">5</h3>
                                <p>Total Departments</p>
                            </div>
                        </div>
                        <div class="dept-stat-card">
                            <div class="dept-stat-icon"><i class="fas fa-money-bill-wave"></i></div>
                            <div class="dept-stat-content">
                                <h3 id="totalBudget">â‚¦2.6M</h3>
                                <p>Total Monthly Budget</p>
                            </div>
                        </div>
                        <div class="dept-stat-card">
                            <div class="dept-stat-icon"><i class="fas fa-handshake"></i></div>
                            <div class="dept-stat-content">
                                <h3 id="activeLoans">0</h3>
                                <p>Active Loans</p>
                            </div>
                        </div>
                        <div class="dept-stat-card">
                            <div class="dept-stat-icon"><i class="fas fa-clipboard-list"></i></div>
                            <div class="dept-stat-content">
                                <h3 id="pendingAssignments">0</h3>
                                <p>Pending Assignments</p>
                            </div>
                        </div>
                    </div>

                    <div class="dept-overview-grid">
                        <div class="dept-overview-card">
                            <h3><i class="fas fa-chart-line"></i> Budget Utilization</h3>
                            <div id="budgetChart" class="chart-container">
                                <!-- Budget chart will be rendered here -->
                            </div>
                        </div>
                        <div class="dept-overview-card">
                            <h3><i class="fas fa-exclamation-triangle"></i> Alerts & Warnings</h3>
                            <div id="departmentAlerts" class="alerts-list">
                                <!-- Alerts will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Departments Management -->
                <div id="dept-departments" class="sub-tab-content">
                    <div class="departments-grid" id="departmentsGrid">
                        <!-- Departments will be loaded here -->
                    </div>
                </div>

                <!-- Loans Management -->
                <div id="dept-loans" class="sub-tab-content">
                    <div class="loans-header">
                        <button class="btn btn-primary" onclick="showLoanModal()">
                            <i class="fas fa-plus"></i> Create New Loan
                        </button>
                        <div class="loans-filters">
                            <select id="loanStatusFilter" onchange="filterLoans()">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                                <option value="defaulted">Defaulted</option>
                            </select>
                        </div>
                    </div>
                    <div class="loans-list" id="loansList">
                        <!-- Loans will be loaded here -->
                    </div>
                </div>

                <!-- Payment Assignments -->
                <div id="dept-assignments" class="sub-tab-content">
                    <div class="assignments-header">
                        <button class="btn btn-primary" onclick="showPaymentAssignmentModal()">
                            <i class="fas fa-plus"></i> Create Payment Assignment
                        </button>
                        <div class="assignments-filters">
                            <select id="assignmentStatusFilter" onchange="filterAssignments()">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="approved">Approved</option>
                                <option value="partially_paid">Partially Paid</option>
                                <option value="fully_paid">Fully Paid</option>
                            </select>
                        </div>
                    </div>
                    <div class="assignments-list" id="assignmentsList">
                        <!-- Assignments will be loaded here -->
                    </div>
                </div>

                <!-- Transactions -->
                <div id="dept-transactions" class="sub-tab-content">
                    <div class="transactions-filters">
                        <div class="filter-group">
                            <label>Department:</label>
                            <select id="transactionDeptFilter" onchange="filterTransactions()">
                                <option value="">All Departments</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Type:</label>
                            <select id="transactionTypeFilter" onchange="filterTransactions()">
                                <option value="">All Types</option>
                                <option value="payment">Payment</option>
                                <option value="loan_disbursement">Loan Disbursement</option>
                                <option value="loan_repayment">Loan Repayment</option>
                                <option value="budget_allocation">Budget Allocation</option>
                                <option value="transfer">Transfer</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Date Range:</label>
                            <input type="date" id="transactionStartDate" onchange="filterTransactions()">
                            <input type="date" id="transactionEndDate" onchange="filterTransactions()">
                        </div>
                    </div>
                    <div class="transactions-list" id="transactionsList">
                        <!-- Transactions will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Booking</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="bookingForm">
                    <select id="roomSelect" name="roomId" required aria-label="Select Room">
                        <option value="">Select Room</option>
                    </select>
                    <select id="customerSelect" name="customerId" required aria-label="Select Customer">
                        <option value="">Select Customer</option>
                    </select>
                    <label for="checkIn">Check-in Date:</label>
                    <input type="date" id="checkIn" name="checkIn" required>
                    <label for="checkOut">Check-out Date:</label>
                    <input type="date" id="checkOut" name="checkOut" required title="Check-out date">
                    <button type="submit" class="btn btn-primary">Create Booking</button>
                </form>
            </div>
        </div>
    </div>

    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Customer</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <input type="text" id="customerNameBooking" name="name" placeholder="Full Name" required>
                    <input type="email" id="customerEmailBooking" name="email" placeholder="Email" required>
                    <input type="tel" id="customerPhoneBooking" name="phone" placeholder="Phone" required>
                    <textarea id="customerNotes" name="notes" placeholder="Notes (optional)"></textarea>
                    <button type="submit" class="btn btn-primary">Add Customer</button>
                </form>
            </div>
        </div>
    </div>

    <div id="barItemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Bar Item</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="barItemForm">
                    <input type="text" id="itemName" name="name" placeholder="Item Name" required>
                    <input type="number" id="itemPrice" name="price" placeholder="Price" step="0.01" required>
                    <input type="number" id="itemStock" name="stock" placeholder="Stock Quantity" required>
                    <select id="itemCategory" name="category" required aria-label="Select Category">
                        <option value="">Select Category</option>
                        <option value="beer">Beer</option>
                        <option value="wine">Wine</option>
                        <option value="spirits">Spirits</option>
                        <option value="cocktails">Cocktails</option>
                        <option value="non-alcoholic">Non-Alcoholic</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Add Item</button>
                </form>
            </div>
        </div>
    </div>

    <div id="orderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Kitchen Order</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="orderForm">
                    <select id="orderCustomer" required title="Select Customer">
                        <option value="">Select Customer</option>
                    </select>
                    <select id="orderRoom" title="Select Room (Optional)">
                        <option value="">Room (optional)</option>
                    </select>
                    <textarea id="orderItems" placeholder="Order Items" required></textarea>
                    <select id="orderType" required title="Select Order Type">
                        <option value="">Order Type</option>
                        <option value="room-service">Room Service</option>
                        <option value="restaurant">Restaurant</option>
                        <option value="takeaway">Takeaway</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Create Order</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Police Report Modal -->
    <div id="policeReportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Police Report</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="policeReportForm">
                    <div class="form-row">
                        <input type="text" id="incidentType" placeholder="Incident Type" required>
                        <input type="datetime-local" id="incidentDateTime" required title="Date and Time of Incident">
                    </div>
                    <select id="reportRoom" title="Select Room (if applicable)">
                        <option value="">Room (if applicable)</option>
                    </select>
                    <select id="reportCustomer" title="Select Customer (if involved)">
                        <option value="">Customer (if involved)</option>
                    </select>
                    <textarea id="incidentDescription" placeholder="Detailed description of the incident" required rows="4"></textarea>
                    <div class="form-row">
                        <input type="text" id="reportingOfficer" placeholder="Reporting Staff Member" required>
                        <input type="text" id="policeContactNumber" placeholder="Police Contact Number">
                    </div>
                    <div class="form-row">
                        <select id="severity" required title="Incident Severity">
                            <option value="">Severity Level</option>
                            <option value="low">Low - Minor incident</option>
                            <option value="medium">Medium - Requires attention</option>
                            <option value="high">High - Serious incident</option>
                            <option value="critical">Critical - Emergency response</option>
                        </select>
                        <select id="status" required title="Report Status">
                            <option value="">Status</option>
                            <option value="reported">Reported</option>
                            <option value="investigating">Under Investigation</option>
                            <option value="resolved">Resolved</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                    <textarea id="actionsTaken" placeholder="Actions taken (optional)" rows="3"></textarea>
                    <button type="submit" class="btn btn-primary">Submit Report</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Process Payment</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="paymentForm">
                    <div class="payment-details">
                        <div class="form-row">
                            <select id="paymentCustomer" required title="Select Customer">
                                <option value="">Select Customer</option>
                            </select>
                            <select id="paymentRoom" title="Select Room (if applicable)">
                                <option value="">Room (if applicable)</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="number" id="paymentAmount" placeholder="Amount" step="0.01" min="0" required>
                            <select id="paymentType" required title="Payment Type">
                                <option value="">Payment Type</option>
                                <option value="room">Room Charge</option>
                                <option value="food">Food & Beverage</option>
                                <option value="service">Additional Services</option>
                                <option value="deposit">Security Deposit</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <select id="paymentMethod" required title="Payment Method">
                                <option value="">Payment Method</option>
                                <option value="cash">Cash</option>
                                <option value="credit">Credit Card</option>
                                <option value="debit">Debit Card</option>
                                <option value="mobile">Mobile Payment</option>
                                <option value="bank_transfer">Bank Transfer</option>
                            </select>
                            <input type="text" id="referenceNumber" placeholder="Reference/Transaction Number">
                        </div>
                        <textarea id="paymentNotes" placeholder="Payment notes (optional)" rows="2"></textarea>
                        
                        <!-- Card Payment Section -->
                        <div id="cardPaymentSection" class="card-payment" style="display: none;">
                            <h4>Card Payment Details</h4>
                            <div class="form-row">
                                <input type="text" id="cardNumber" placeholder="Card Number" maxlength="19">
                                <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5">
                            </div>
                            <div class="form-row">
                                <input type="text" id="cardCVV" placeholder="CVV" maxlength="4">
                                <input type="text" id="cardHolderName" placeholder="Cardholder Name">
                            </div>
                        </div>
                    </div>
                    <div class="payment-summary">
                        <div class="total-amount">
                            <strong>Total: â‚¦<span id="totalAmountPayment">0.00</span></strong>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Process Payment</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Refund Modal -->
    <div id="refundModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Process Refund</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="refundForm">
                    <select id="refundTransaction" required title="Select Transaction">
                        <option value="">Select Original Transaction</option>
                    </select>
                    <div class="form-row">
                        <input type="number" id="refundAmount" placeholder="Refund Amount" step="0.01" min="0" required>
                        <select id="refundReason" required title="Refund Reason">
                            <option value="">Refund Reason</option>
                            <option value="cancellation">Booking Cancellation</option>
                            <option value="overcharge">Overcharge</option>
                            <option value="service_issue">Service Issue</option>
                            <option value="duplicate">Duplicate Payment</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <textarea id="refundNotes" placeholder="Refund notes" rows="3" required></textarea>
                    <button type="submit" class="btn btn-warning">Process Refund</button>
                </form>
            </div>
        </div>
    </div>

    <!-- New Feature Modals -->
    
    <!-- Notification Modal -->
    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Notification</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="notificationForm">
                    <select id="notificationRecipient" required title="Select Recipient">
                        <option value="">Select Recipient</option>
                        <option value="all">All Staff</option>
                        <option value="front-desk">Front Desk</option>
                        <option value="housekeeping">Housekeeping</option>
                        <option value="kitchen">Kitchen</option>
                        <option value="management">Management</option>
                    </select>
                    <select id="notificationPriority" required title="Select Priority">
                        <option value="">Priority Level</option>
                        <option value="low">Low</option>
                        <option value="normal">Normal</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                    <input type="text" id="notificationTitle" placeholder="Notification Title" required>
                    <textarea id="notificationMessage" placeholder="Message" required rows="4"></textarea>
                    <button type="submit" class="btn btn-primary">Send Notification</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Staff Modal -->
    <div id="staffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Staff Member</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="staffForm">
                    <div class="form-row">
                        <input type="text" id="staffPersonalId" placeholder="Personal ID (e.g., EMP001)" required>
                        <input type="text" id="staffName" placeholder="Full Name" required>
                    </div>
                    <div class="form-row">
                        <input type="email" id="staffEmail" placeholder="Email" required>
                        <input type="tel" id="staffPhone" placeholder="Phone" required>
                    </div>
                    <div class="form-row">
                        <select id="staffPosition" required title="Select Position">
                            <option value="">Position</option>
                            <option value="front-desk">Front Desk</option>
                            <option value="housekeeping">Housekeeping</option>
                            <option value="kitchen">Kitchen Staff</option>
                            <option value="bar">Bar Staff</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="management">Management</option>
                            <option value="security">Security</option>
                        </select>
                        <select id="staffShift" required title="Select Shift">
                            <option value="">Shift</option>
                            <option value="morning">Morning (6AM-2PM)</option>
                            <option value="afternoon">Afternoon (2PM-10PM)</option>
                            <option value="night">Night (10PM-6AM)</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="number" id="staffSalary" placeholder="Hourly Rate" step="0.01" min="0">
                        <input type="date" id="staffStartDate" title="Start Date" required>
                    </div>
                    <textarea id="staffNotes" placeholder="Notes (optional)" rows="2"></textarea>
                    <button type="submit" class="btn btn-primary">Add Staff</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Schedule</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="scheduleForm">
                    <select id="scheduleStaff" required title="Select Staff">
                        <option value="">Select Staff Member</option>
                    </select>
                    <div class="form-row">
                        <input type="date" id="scheduleDate" required title="Schedule Date">
                        <select id="scheduleShift" required title="Select Shift">
                            <option value="">Shift</option>
                            <option value="morning">Morning (6AM-2PM)</option>
                            <option value="afternoon">Afternoon (2PM-10PM)</option>
                            <option value="night">Night (10PM-6AM)</option>
                        </select>
                    </div>
                    <textarea id="scheduleNotes" placeholder="Schedule notes (optional)" rows="2"></textarea>
                    <button type="submit" class="btn btn-success">Create Schedule</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Clock In/Out Modal -->
    <div id="clockInModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Staff Clock In/Out</h3>
            <form id="clockInForm">
                <select id="clockStaff" required title="Select Staff">
                    <option value="">Select Staff Member</option>
                </select>
                <div class="form-row">
                    <select id="clockActionStaff" required title="Select Action">
                        <option value="">Action</option>
                        <option value="clock-in">Clock In</option>
                        <option value="clock-out">Clock Out</option>
                        <option value="break-start">Start Break</option>
                        <option value="break-end">End Break</option>
                    </select>
                    <input type="datetime-local" id="clockTimeEntry" required title="Time">
                </div>
                <textarea id="clockNotes" placeholder="Notes (optional)" rows="2"></textarea>
                <button type="submit" class="btn btn-info">Record Time</button>
            </form>
        </div>
    </div>

    <!-- Maintenance Modal -->
    <div id="maintenanceModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Maintenance Request</h3>
            <form id="maintenanceForm">
                <div class="form-row">
                    <select id="maintenanceRoom" title="Select Room">
                        <option value="">Room (if applicable)</option>
                    </select>
                    <select id="maintenanceCategory" required title="Select Category">
                        <option value="">Category</option>
                        <option value="plumbing">Plumbing</option>
                        <option value="electrical">Electrical</option>
                        <option value="hvac">HVAC</option>
                        <option value="furniture">Furniture</option>
                        <option value="appliances">Appliances</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-row">
                    <select id="maintenancePriority" required title="Select Priority">
                        <option value="">Priority</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="emergency">Emergency</option>
                    </select>
                    <input type="text" id="maintenanceReporter" placeholder="Reported By" required>
                </div>
                <textarea id="maintenanceDescription" placeholder="Description of issue" required rows="4"></textarea>
                <button type="submit" class="btn btn-primary">Submit Request</button>
            </form>
        </div>
    </div>

    <!-- Supply Modal -->
    <div id="supplyModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Supply Management</h3>
            <form id="supplyForm">
                <div class="form-row">
                    <input type="text" id="supplyName" placeholder="Supply Name" required>
                    <select id="supplyCategory" required title="Select Category">
                        <option value="">Category</option>
                        <option value="cleaning">Cleaning Supplies</option>
                        <option value="toiletries">Toiletries</option>
                        <option value="linens">Linens & Towels</option>
                        <option value="maintenance">Maintenance Tools</option>
                        <option value="office">Office Supplies</option>
                        <option value="kitchen">Kitchen Supplies</option>
                    </select>
                </div>
                <div class="form-row">
                    <input type="number" id="supplyStock" placeholder="Current Stock" required min="0">
                    <input type="number" id="supplyMinimum" placeholder="Minimum Level" required min="0">
                </div>
                <div class="form-row">
                    <input type="text" id="supplySupplier" placeholder="Supplier">
                    <input type="number" id="supplyCost" placeholder="Unit Cost" step="0.01" min="0">
                </div>
                <button type="submit" class="btn btn-success">Add/Update Supply</button>
            </form>
        </div>
    </div>

    <!-- Cleaning Task Modal -->
    <div id="cleaningModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Cleaning Task</h3>
            <form id="cleaningForm">
                <div class="form-row">
                    <select id="cleaningRoom" required title="Select Room">
                        <option value="">Select Room</option>
                    </select>
                    <select id="cleaningType" required title="Select Cleaning Type">
                        <option value="">Cleaning Type</option>
                        <option value="checkout">Checkout Cleaning</option>
                        <option value="maintenance">Maintenance Cleaning</option>
                        <option value="deep">Deep Cleaning</option>
                        <option value="inspection">Room Inspection</option>
                    </select>
                </div>
                <select id="cleaningAssignee" title="Assign To">
                    <option value="">Assign to Staff (optional)</option>
                </select>
                <textarea id="cleaningInstructions" placeholder="Special instructions" rows="3"></textarea>
                <button type="submit" class="btn btn-info">Create Task</button>
            </form>
        </div>
    </div>

    <!-- Service Request Modal -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Guest Service Request</h3>
            <form id="serviceForm">
                <div class="form-row">
                    <select id="serviceCustomer" required title="Select Customer">
                        <option value="">Select Customer</option>
                    </select>
                    <select id="serviceType" required title="Select Service Type">
                        <option value="">Service Type</option>
                        <option value="spa">Spa Booking</option>
                        <option value="event">Event Booking</option>
                        <option value="concierge">Concierge Service</option>
                        <option value="transport">Transportation</option>
                        <option value="dining">Dining Reservation</option>
                    </select>
                </div>
                <div class="form-row">
                    <input type="datetime-local" id="serviceDateTime" required title="Service Date/Time">
                    <input type="number" id="serviceGuests" placeholder="Number of Guests" min="1" value="1">
                </div>
                <textarea id="serviceDetails" placeholder="Service details and special requests" required rows="4"></textarea>
                <button type="submit" class="btn btn-primary">Submit Request</button>
            </form>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Guest Feedback</h3>
            <form id="feedbackForm">
                <select id="feedbackCustomer" required title="Select Customer">
                    <option value="">Select Customer</option>
                </select>
                <div class="form-row">
                    <select id="feedbackCategory" required title="Select Category">
                        <option value="">Feedback Category</option>
                        <option value="room">Room Quality</option>
                        <option value="service">Service Quality</option>
                        <option value="food">Food & Beverage</option>
                        <option value="facilities">Facilities</option>
                        <option value="staff">Staff Performance</option>
                        <option value="overall">Overall Experience</option>
                    </select>
                    <select id="feedbackRating" required title="Select Rating">
                        <option value="">Rating</option>
                        <option value="5">5 - Excellent</option>
                        <option value="4">4 - Good</option>
                        <option value="3">3 - Average</option>
                        <option value="2">2 - Poor</option>
                        <option value="1">1 - Very Poor</option>
                    </select>
                </div>
                <textarea id="feedbackComments" placeholder="Comments and suggestions" required rows="4"></textarea>
                <button type="submit" class="btn btn-success">Submit Feedback</button>
            </form>
        </div>
    </div>

    <!-- Lost & Found Modal -->
    <div id="lostFoundModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Lost & Found Item</h3>
            <form id="lostFoundForm">
                <div class="form-row">
                    <select id="lostFoundType" required title="Select Type">
                        <option value="">Item Status</option>
                        <option value="found">Found Item</option>
                        <option value="lost">Lost Item Report</option>
                    </select>
                    <input type="text" id="lostFoundItem" placeholder="Item Description" required>
                </div>
                <div class="form-row">
                    <input type="text" id="lostFoundLocation" placeholder="Location Found/Lost">
                    <input type="datetime-local" id="lostFoundDateTime" title="Date/Time">
                </div>
                <select id="lostFoundCustomer" title="Related Customer">
                    <option value="">Related Customer (if known)</option>
                </select>
                <textarea id="lostFoundNotes" placeholder="Additional details" rows="3"></textarea>
                <button type="submit" class="btn btn-info">Record Item</button>
            </form>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Send Internal Message</h3>
            <form id="messageForm">
                <div class="form-row">
                    <select id="messageRecipient" required title="Select Recipient">
                        <option value="">Select Recipient</option>
                        <option value="all">All Staff</option>
                        <option value="management">Management</option>
                        <option value="front-desk">Front Desk</option>
                        <option value="housekeeping">Housekeeping</option>
                        <option value="kitchen">Kitchen</option>
                        <option value="maintenance">Maintenance</option>
                    </select>
                    <select id="messagePriority" required title="Select Priority">
                        <option value="">Priority</option>
                        <option value="low">Low</option>
                        <option value="normal">Normal</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <input type="text" id="messageSubject" placeholder="Subject" required>
                <textarea id="messageContent" placeholder="Message content" required rows="4"></textarea>
                <button type="submit" class="btn btn-primary">Send Message</button>
            </form>
        </div>
    </div>

    <!-- Call Log Modal -->
    <div id="callLogModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Log Phone Call</h3>
            <form id="callLogForm">
                <div class="form-row">
                    <select id="callType" required title="Select Call Type">
                        <option value="">Call Type</option>
                        <option value="incoming">Incoming</option>
                        <option value="outgoing">Outgoing</option>
                    </select>
                    <input type="tel" id="callNumber" placeholder="Phone Number" required>
                </div>
                <div class="form-row">
                    <input type="text" id="callContact" placeholder="Contact Name">
                    <input type="datetime-local" id="callDateTime" required title="Call Date/Time">
                </div>
                <select id="callPurpose" required title="Select Purpose">
                    <option value="">Call Purpose</option>
                    <option value="reservation">Reservation</option>
                    <option value="complaint">Complaint</option>
                    <option value="inquiry">General Inquiry</option>
                    <option value="emergency">Emergency</option>
                    <option value="vendor">Vendor/Supplier</option>
                    <option value="other">Other</option>
                </select>
                <textarea id="callNotes" placeholder="Call summary and notes" required rows="4"></textarea>
                <button type="submit" class="btn btn-success">Log Call</button>
            </form>
        </div>
    </div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="modal">
        <div class="modal-content emergency-modal">
            <span class="close">&times;</span>
            <h3 class="emergency-title">ðŸš¨ Emergency Alert</h3>
            <form id="emergencyForm">
                <select id="emergencyType" required title="Select Emergency Type">
                    <option value="">Emergency Type</option>
                    <option value="fire">Fire</option>
                    <option value="medical">Medical Emergency</option>
                    <option value="security">Security Threat</option>
                    <option value="evacuation">Evacuation</option>
                    <option value="utilities">Utilities Failure</option>
                    <option value="other">Other Emergency</option>
                </select>
                <div class="form-row">
                    <input type="text" id="emergencyLocation" placeholder="Location" required>
                    <select id="emergencyPriority" required title="Select Priority">
                        <option value="">Severity</option>
                        <option value="critical">Critical - Life Threatening</option>
                        <option value="high">High - Immediate Action</option>
                        <option value="medium">Medium - Urgent</option>
                    </select>
                </div>
                <textarea id="emergencyDescription" placeholder="Emergency details" required rows="4"></textarea>
                <div class="emergency-actions">
                    <button type="submit" class="btn btn-danger">ðŸš¨ ALERT ALL STAFF</button>
                    <button type="button" class="btn btn-warning" onclick="callEmergencyServices()">ðŸ“ž CALL 911</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Clock In/Out Modal -->
    <div id="clockInModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Staff Clock In/Out</h3>
            <form id="clockInForm">
                <div class="form-row">
                    <input type="text" id="clockPersonalId" placeholder="Personal ID (e.g., EMP001)" required>
                    <select id="clockActionForm" required title="Select Action">
                        <option value="">Action</option>
                        <option value="clock-in">Clock In</option>
                        <option value="clock-out">Clock Out</option>
                        <option value="break-start">Start Break</option>
                        <option value="break-end">End Break</option>
                    </select>
                </div>
                <div class="form-row">
                    <input type="text" id="clockLocation" placeholder="Location (optional)">
                    <input type="datetime-local" id="clockTimeForm" title="Time (leave empty for current time)">
                </div>
                <textarea id="clockNotesForm" placeholder="Notes (optional)" rows="2"></textarea>
                <button type="submit" class="btn btn-info">Record Time</button>
            </form>
        </div>
    </div>

    <!-- Timesheet Modal -->
    <div id="timesheetModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close">&times;</span>
            <h3>Staff Timesheet</h3>
            <div class="timesheet-controls">
                <div class="form-row">
                    <input type="text" id="timesheetPersonalId" placeholder="Personal ID (e.g., EMP001)" required>
                    <input type="date" id="timesheetDate" title="Select Date">
                    <button type="button" class="btn btn-primary" onclick="loadTimesheet()">Load Timesheet</button>
                </div>
            </div>
            <div class="timesheet-content" id="timesheetContent">
                <!-- Timesheet data will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Staff ID Scanner Modal -->
    <div id="scannerModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Quick Clock Action</h3>
            <div class="scanner-interface">
                <div class="scanner-result">
                    <h4>Staff Information</h4>
                    <div id="scannedStaffInfo">
                        <!-- Staff info will be displayed here -->
                    </div>
                </div>
                <div class="quick-actions">
                    <button class="btn btn-success btn-large" onclick="quickClock('clock-in')">
                        <i class="fas fa-sign-in-alt"></i><br>Clock In
                    </button>
                    <button class="btn btn-warning btn-large" onclick="quickClock('break-start')">
                        <i class="fas fa-coffee"></i><br>Start Break
                    </button>
                    <button class="btn btn-info btn-large" onclick="quickClock('break-end')">
                        <i class="fas fa-play"></i><br>End Break
                    </button>
                    <button class="btn btn-danger btn-large" onclick="quickClock('clock-out')">
                        <i class="fas fa-sign-out-alt"></i><br>Clock Out
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Room Status Modal -->
    <div id="roomStatusModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Change Room Status</h3>
            <form id="roomStatusForm">
                <div class="form-row">
                    <label for="roomStatusSelect">New Status:</label>
                    <select id="roomStatusSelect" required>
                        <option value="">Select Status</option>
                        <option value="available">Available</option>
                        <option value="occupied">Occupied</option>
                        <option value="cleaning">Cleaning</option>
                        <option value="maintenance">Maintenance</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Status</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('roomStatusModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Room Price Edit Modal -->
    <div id="roomPriceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('roomPriceModal')">&times;</span>
            <h3><i class="fas fa-dollar-sign"></i> Edit Room Price</h3>
            <form id="roomPriceForm" onsubmit="handleRoomPriceSubmit(event)">
                <div class="price-edit-header">
                    <div class="room-info">
                        <h4 id="priceEditRoomName">Room Name</h4>
                        <p id="priceEditRoomType">Room Type</p>
                    </div>
                    <div class="current-price">
                        <label>Current Price:</label>
                        <div class="price-display" id="currentPriceDisplay">â‚¦0</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <label for="newRoomPrice">New Price (â‚¦):</label>
                    <input type="number" id="newRoomPrice" name="price" placeholder="Enter new price" required min="1000" max="1000000" step="100">
                </div>
                
                <div class="price-suggestions">
                    <label>Quick Price Options:</label>
                    <div class="price-buttons">
                        <button type="button" class="btn-price-option" onclick="setQuickPrice(25000)">â‚¦25,000</button>
                        <button type="button" class="btn-price-option" onclick="setQuickPrice(35000)">â‚¦35,000</button>
                        <button type="button" class="btn-price-option" onclick="setQuickPrice(50000)">â‚¦50,000</button>
                        <button type="button" class="btn-price-option" onclick="setQuickPrice(75000)">â‚¦75,000</button>
                        <button type="button" class="btn-price-option" onclick="setQuickPrice(100000)">â‚¦100,000</button>
                    </div>
                </div>
                
                <div class="form-row">
                    <label for="priceChangeReason">Reason for Price Change:</label>
                    <select id="priceChangeReason" name="reason">
                        <option value="">Select reason (optional)</option>
                        <option value="seasonal-adjustment">Seasonal Adjustment</option>
                        <option value="market-rates">Market Rate Update</option>
                        <option value="room-upgrade">Room Upgrade</option>
                        <option value="promotion">Promotional Pricing</option>
                        <option value="maintenance">Post-Maintenance Adjustment</option>
                        <option value="management-decision">Management Decision</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <textarea id="priceChangeNotes" name="notes" placeholder="Additional notes (optional)" rows="2"></textarea>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Update Price
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('roomPriceModal')">
                        Cancel
                    </button>
                </div>
                
                <input type="hidden" id="roomIdToEdit" name="roomId">
            </form>
        </div>
    </div>

    <!-- Order Status Modal -->
    <div id="orderStatusModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Change Order Status</h3>
            <form id="orderStatusForm">
                <div class="form-row">
                    <label for="orderStatusSelect">New Status:</label>
                    <select id="orderStatusSelect" required>
                        <option value="">Select Status</option>
                        <option value="pending">Pending</option>
                        <option value="preparing">Preparing</option>
                        <option value="ready">Ready</option>
                        <option value="delivered">Delivered</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Status</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('orderStatusModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Report Status Modal -->
    <div id="reportStatusModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Change Report Status</h3>
            <form id="reportStatusForm">
                <div class="form-row">
                    <label for="reportStatusSelect">New Status:</label>
                    <select id="reportStatusSelect" required>
                        <option value="">Select Status</option>
                        <option value="reported">Reported</option>
                        <option value="investigating">Investigating</option>
                        <option value="resolved">Resolved</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Status</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('reportStatusModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Staff Status Modal -->
    <div id="staffStatusModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Change Staff Status</h3>
            <form id="staffStatusForm">
                <div class="form-row">
                    <label for="staffStatusSelect">New Status:</label>
                    <select id="staffStatusSelect" required>
                        <option value="">Select Status</option>
                        <option value="on-duty">On Duty</option>
                        <option value="off-duty">Off Duty</option>
                        <option value="break">On Break</option>
                        <option value="sick">Sick Leave</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Status</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('staffStatusModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Laundry Task Modal -->
    <div id="laundryTaskModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>New Laundry Task</h3>
            <form id="laundryTaskForm">
                <div class="form-row">
                    <input type="text" id="laundryTaskTitle" name="title" placeholder="Task Title" required>
                    <select id="laundryTaskType" name="type" required>
                        <option value="">Select Type</option>
                        <option value="washing">Washing</option>
                        <option value="washing-ironing">Washing/Ironing</option>
                        <option value="drying">Drying</option>
                        <option value="pressing">Pressing</option>
                        <option value="ironing">Ironing</option>
                        <option value="folding">Folding</option>
                        <option value="delivery">Delivery</option>
                    </select>
                </div>
                <div class="form-row">
                    <select id="laundryTaskRoom" name="roomName" required>
                        <option value="">Select Room</option>
                        <!-- Room options will be populated dynamically -->
                    </select>
                    <select id="laundryTaskPriority" name="priority" required>
                        <option value="">Select Priority</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <textarea id="laundryTaskNotes" name="notes" placeholder="Additional notes" rows="3"></textarea>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create Task</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('laundryTaskModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scan & Pay Order Modal -->
    <div id="scanPayOrderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Scan & Pay Order</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="scanPayOrderForm">
                    <div class="form-row">
                        <select id="scanPayCustomer" name="customerId" required>
                            <option value="">Select Customer</option>
                        </select>
                        <select id="scanPayTable" name="tableNumber">
                            <option value="">Table Number (Optional)</option>
                            <option value="1">Table 1</option>
                            <option value="2">Table 2</option>
                            <option value="3">Table 3</option>
                            <option value="4">Table 4</option>
                            <option value="5">Table 5</option>
                            <option value="6">Table 6</option>
                            <option value="7">Table 7</option>
                            <option value="8">Table 8</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="text" id="scanPayOrderNumber" name="orderNumber" placeholder="Order Number" required>
                        <select id="scanPayOrderType" name="orderType" required>
                            <option value="">Order Type</option>
                            <option value="dine-in">Dine In</option>
                            <option value="takeaway">Takeaway</option>
                            <option value="room-service">Room Service</option>
                        </select>
                    </div>
                    <textarea id="scanPayItems" name="items" placeholder="Order Items (e.g., 2x Burger, 1x Fries, 2x Coke)" required rows="3"></textarea>
                    <div class="form-row">
                        <input type="number" id="scanPayAmount" name="amount" placeholder="Total Amount (â‚¦)" step="0.01" min="0" required>
                        <select id="scanPayPaymentMethod" name="paymentMethod" required>
                            <option value="">Payment Method</option>
                            <option value="qr-code">QR Code</option>
                            <option value="mobile-app">Mobile App</option>
                            <option value="nfc">NFC/Tap to Pay</option>
                            <option value="card">Card Payment</option>
                        </select>
                    </div>
                    <textarea id="scanPayNotes" name="notes" placeholder="Special instructions or notes" rows="2"></textarea>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Create Order</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('scanPayOrderModal')">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Kitchen Item Modal -->
    <div id="kitchenItemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Kitchen Item</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="kitchenItemForm">
                    <div class="form-row">
                        <input type="text" id="kitchenItemName" name="name" placeholder="Item Name" required>
                        <select id="kitchenItemCategory" name="category" required>
                            <option value="">Select Category</option>
                            <option value="Vegetables">Vegetables</option>
                            <option value="Meat">Meat & Poultry</option>
                            <option value="Dairy">Dairy</option>
                            <option value="Grains">Grains & Cereals</option>
                            <option value="Spices">Spices & Seasonings</option>
                            <option value="Beverages">Beverages</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="number" id="kitchenItemStock" name="currentStock" placeholder="Current Stock" step="0.01" required>
                        <select id="kitchenItemUnit" name="unit" required>
                            <option value="">Select Unit</option>
                            <option value="kg">Kilograms (kg)</option>
                            <option value="lbs">Pounds (lbs)</option>
                            <option value="pieces">Pieces</option>
                            <option value="liters">Liters</option>
                            <option value="bottles">Bottles</option>
                            <option value="bags">Bags</option>
                            <option value="boxes">Boxes</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="number" id="kitchenItemCost" name="costPerUnit" placeholder="Cost per Unit (â‚¦)" step="0.01" required>
                        <input type="number" id="kitchenItemMinStock" name="minimumStock" placeholder="Minimum Stock Level" step="0.01" required>
                    </div>
                    <div class="form-row">
                        <input type="text" id="kitchenItemSupplier" name="supplier" placeholder="Supplier (optional)">
                    </div>
                    <textarea id="kitchenItemNotes" name="notes" placeholder="Additional notes" rows="2"></textarea>
                    <button type="submit" class="btn btn-primary">Add Item</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div id="purchaseModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>Record Purchase</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="purchaseForm">
                    <div class="form-row">
                        <input type="text" id="purchaseSupplier" name="supplier" placeholder="Supplier Name" required>
                        <input type="date" id="purchaseDate" name="date" required>
                    </div>
                    <div class="form-row">
                        <select id="purchasePaymentMethod" name="paymentMethod" required>
                            <option value="">Payment Method</option>
                            <option value="cash">Cash</option>
                            <option value="bank-transfer">Bank Transfer</option>
                            <option value="cheque">Cheque</option>
                            <option value="credit">Credit</option>
                        </select>
                        <input type="text" id="purchaseInvoice" name="invoiceNumber" placeholder="Invoice Number">
                    </div>
                
                <!-- Purchase Items List -->
                <div class="purchase-items-section">
                    <h4>Purchase Items</h4>
                    <div id="purchaseItemsList">
                        <div class="purchase-item-row">
                            <select name="itemName[]" required>
                                <option value="">Select Item</option>
                            </select>
                            <input type="number" name="quantity[]" placeholder="Quantity" step="0.01" required>
                            <input type="number" name="unitCost[]" placeholder="Cost per Unit" step="0.01" required>
                            <input type="number" name="total[]" placeholder="Total" step="0.01" readonly>
                            <button type="button" class="btn btn-danger btn-sm" onclick="removePurchaseItem(this)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addPurchaseItem()">
                        <i class="fas fa-plus"></i> Add Item
                    </button>
                </div>
                
                    <div class="purchase-total">
                        <h4>Total Purchase Amount: â‚¦<span id="purchaseTotalAmount">0.00</span></h4>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Record Purchase</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Update Stock Modal -->
    <div id="updateStockModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('updateStockModal')">&times;</span>
            <h2><i class="fas fa-edit"></i> Update Stock</h2>
            <form id="updateStockForm">
                <div class="form-group">
                    <label for="updateStockItemName">Item:</label>
                    <input type="text" id="updateStockItemName" readonly>
                </div>
                
                <div class="form-group">
                    <label for="updateStockCurrentStock">Current Stock:</label>
                    <input type="text" id="updateStockCurrentStock" readonly>
                </div>
                
                <div class="form-group">
                    <label for="updateStockNewStock">New Stock Quantity:</label>
                    <input type="number" id="updateStockNewStock" min="0" required>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Update Stock</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('updateStockModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Stock Item Modal -->
    <div id="stockItemModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('stockItemModal')">&times;</span>
            <h3>Add Stock Item</h3>
            <form id="stockItemForm" onsubmit="handleStockItemSubmit(event)">
                <div class="form-row">
                    <input type="text" id="stockItemName" placeholder="Item Name" required>
                    <select id="stockItemCategory" required title="Select Category">
                        <option value="">Category</option>
                        <option value="cleaning">Cleaning Supplies</option>
                        <option value="toiletries">Toiletries</option>
                        <option value="linens">Linens & Towels</option>
                        <option value="maintenance">Maintenance Tools</option>
                        <option value="office">Office Supplies</option>
                        <option value="kitchen">Kitchen Supplies</option>
                        <option value="beverages">Beverages</option>
                        <option value="food">Food Items</option>
                    </select>
                </div>
                <div class="form-row">
                    <input type="number" id="stockItemQuantity" placeholder="Initial Quantity" required min="0">
                    <input type="number" id="stockItemMinLevel" placeholder="Minimum Level" required min="0">
                </div>
                <div class="form-row">
                    <input type="number" id="stockItemPurchasePrice" placeholder="Purchase Price per Unit" step="0.01" min="0" required>
                    <input type="number" id="stockItemSellingPrice" placeholder="Selling Price per Unit" step="0.01" min="0" required>
                </div>
                <div class="form-row">
                    <select id="stockItemSupplier" required>
                        <option value="">Select Supplier</option>
                        <option value="cleancorp">CleanCorp Ltd</option>
                        <option value="linenplus">LinenPlus</option>
                        <option value="freshfood">Fresh Food Distributors</option>
                        <option value="other">Other (specify in description)</option>
                    </select>
                    <input type="text" id="stockItemUnit" placeholder="Unit (e.g., pieces, kg, liters)" required>
                </div>
                <textarea id="stockItemDescription" placeholder="Description (optional)" rows="2"></textarea>
                <button type="submit" class="btn btn-primary">Add Stock Item</button>
            </form>
        </div>
    </div>

    <!-- Stock Transfer Modal -->
    <div id="stockTransferModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('stockTransferModal')">&times;</span>
            <h3>Transfer Stock</h3>
            <form id="stockTransferForm" onsubmit="handleStockTransferSubmit(event)">
                <div class="form-row">
                    <select id="transferFromLocation" required title="Select From Location">
                        <option value="">From Location</option>
                        <option value="main-storage">Main Storage</option>
                        <option value="housekeeping">Housekeeping</option>
                        <option value="kitchen">Kitchen</option>
                        <option value="bar">Bar</option>
                        <option value="maintenance">Maintenance</option>
                        <option value="front-desk">Front Desk</option>
                    </select>
                    <select id="transferToLocation" required title="Select To Location">
                        <option value="">To Location</option>
                        <option value="main-storage">Main Storage</option>
                        <option value="housekeeping">Housekeeping</option>
                        <option value="kitchen">Kitchen</option>
                        <option value="bar">Bar</option>
                        <option value="maintenance">Maintenance</option>
                        <option value="front-desk">Front Desk</option>
                    </select>
                </div>
                <div class="form-row">
                    <input type="text" id="transferItemName" placeholder="Item Name" required>
                    <input type="number" id="transferQuantity" placeholder="Quantity" required min="1">
                </div>
                <div class="form-row">
                    <input type="text" id="transferRequestedBy" placeholder="Requested By" required>
                    <input type="text" id="transferAuthorizedBy" placeholder="Authorized By">
                </div>
                <textarea id="transferReason" placeholder="Reason for Transfer" rows="2" required></textarea>
                <button type="submit" class="btn btn-info">Transfer Stock</button>
            </form>
        </div>
    </div>

    <!-- Supplier Modal -->
    <div id="supplierModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('supplierModal')">&times;</span>
            <h3>Add Supplier</h3>
            <form id="supplierForm" onsubmit="handleSupplierSubmit(event)">
                <div class="form-row">
                    <input type="text" id="supplierName" placeholder="Supplier Name" required>
                    <input type="text" id="supplierCode" placeholder="Supplier Code (e.g., SUP001)" required>
                </div>
                <div class="form-row">
                    <input type="email" id="supplierEmail" placeholder="Email Address" required>
                    <input type="tel" id="supplierPhone" placeholder="Phone Number" required>
                </div>
                <div class="form-row">
                    <input type="text" id="supplierContact" placeholder="Contact Person">
                    <select id="supplierCategory" required>
                        <option value="">Supplier Category</option>
                        <option value="cleaning">Cleaning Supplies</option>
                        <option value="food-beverage">Food & Beverage</option>
                        <option value="linens">Linens & Textiles</option>
                        <option value="maintenance">Maintenance & Tools</option>
                        <option value="office">Office Supplies</option>
                        <option value="technology">Technology</option>
                        <option value="furniture">Furniture</option>
                    </select>
                </div>
                <textarea id="supplierAddress" placeholder="Full Address" rows="2" required></textarea>
                <div class="form-row">
                    <input type="number" id="supplierPaymentTerms" placeholder="Payment Terms (days)" min="0" max="365">
                    <select id="supplierStatus">
                        <option value="active">Active</option>
                        <option value="pending">Pending Approval</option>
                        <option value="suspended">Suspended</option>
                    </select>
                </div>
                <textarea id="supplierNotes" placeholder="Notes & Special Terms" rows="2"></textarea>
                <button type="submit" class="btn btn-primary">Add Supplier</button>
            </form>
        </div>
    </div>

    <!-- Stock Valuation Modal -->
    <div id="stockValuationModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close" onclick="closeModal('stockValuationModal')">&times;</span>
            <h3><i class="fas fa-chart-bar"></i> Stock Valuation Report</h3>
            <div class="valuation-content">
                <div class="valuation-overview" id="valuationOverview">
                    <!-- Valuation overview will be loaded here -->
                </div>
                <div class="valuation-details" id="valuationDetails">
                    <!-- Detailed valuation will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Lounge Pricing Calculator Modal -->
    <div id="loungePricingModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3><i class="fas fa-calculator"></i> Lounge Pricing Calculator</h3>
                <span class="close" onclick="closeModal('loungePricingModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="pricing-calculator">
                    <div class="calculator-section">
                        <h4>Event Details</h4>
                        <div class="form-row">
                            <select id="calcEventType" required>
                                <option value="">Select Event Type</option>
                                <option value="Birthday Party">Birthday Party</option>
                                <option value="Wedding Reception">Wedding Reception</option>
                                <option value="Corporate Event">Corporate Event</option>
                                <option value="Anniversary Celebration">Anniversary Celebration</option>
                                <option value="Graduation Party">Graduation Party</option>
                                <option value="Private Meeting">Private Meeting</option>
                            </select>
                            <input type="number" id="calcDuration" placeholder="Duration (hours)" min="1" max="12" required>
                        </div>
                        <div class="form-row">
                            <input type="number" id="calcGuestCount" placeholder="Number of Guests" min="1" max="200" required>
                        </div>
                    </div>

                    <div class="calculator-section">
                        <h4>Add-ons</h4>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="calcDecorations" value="basic">
                                Decorations
                            </label>
                            <select id="calcDecorationsType" disabled>
                                <option value="basic">Basic (â‚¦15,000)</option>
                                <option value="premium">Premium (â‚¦35,000)</option>
                                <option value="luxury">Luxury (â‚¦60,000)</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="calcCatering">
                                Catering
                            </label>
                            <span class="addon-note">â‚¦3,500 per person (min. 10 guests)</span>
                        </div>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="calcAudioVisual" value="basic">
                                Audio/Visual
                            </label>
                            <select id="calcAVType" disabled>
                                <option value="basic">Basic (â‚¦20,000)</option>
                                <option value="premium">Premium (â‚¦45,000)</option>
                                <option value="professional">Professional (â‚¦80,000)</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="calcPhotography" value="basic">
                                Photography
                            </label>
                            <select id="calcPhotoType" disabled>
                                <option value="basic">Basic - 2 hours (â‚¦25,000)</option>
                                <option value="full">Full Event (â‚¦50,000)</option>
                            </select>
                        </div>
                    </div>

                    <div class="pricing-breakdown" id="pricingBreakdown">
                        <!-- Pricing breakdown will be displayed here -->
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="calculateLoungeCost()">
                            <i class="fas fa-calculator"></i> Calculate Cost
                        </button>
                        <button type="button" class="btn btn-success" onclick="proceedToBooking()">
                            <i class="fas fa-arrow-right"></i> Proceed to Booking
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('loungePricingModal')">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lounge Booking Modal -->
    <div id="loungeBookingModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3><i class="fas fa-plus"></i> New Lounge Booking</h3>
                <span class="close" onclick="closeModal('loungeBookingModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loungeBookingForm">
                    <div class="booking-section">
                        <h4>Event Information</h4>
                        <div class="form-row">
                            <input type="text" id="eventName" name="eventName" placeholder="Event Name" required>
                            <select id="eventType" name="eventType" required>
                                <option value="">Select Event Type</option>
                                <option value="Birthday Party">Birthday Party</option>
                                <option value="Wedding Reception">Wedding Reception</option>
                                <option value="Corporate Event">Corporate Event</option>
                                <option value="Anniversary Celebration">Anniversary Celebration</option>
                                <option value="Graduation Party">Graduation Party</option>
                                <option value="Private Meeting">Private Meeting</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="date" id="eventDate" name="eventDate" required>
                            <input type="time" id="startTime" name="startTime" required>
                            <input type="time" id="endTime" name="endTime" required>
                        </div>
                        <div class="form-row">
                            <input type="number" id="guestCount" name="guestCount" placeholder="Number of Guests" min="1" max="200" required>
                            <input type="number" id="duration" name="duration" placeholder="Duration (hours)" min="1" max="12" step="0.5" required>
                        </div>
                    </div>

                    <div class="booking-section">
                        <h4>Customer Details</h4>
                        <div class="form-row">
                            <input type="text" id="customerName" name="customerName" placeholder="Customer Name" required>
                            <input type="tel" id="customerPhone" name="customerPhone" placeholder="Phone Number" required>
                        </div>
                        <div class="form-row">
                            <input type="email" id="customerEmail" name="customerEmail" placeholder="Email Address">
                        </div>
                    </div>

                    <div class="booking-section">
                        <h4>Event Requirements</h4>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="cateringIncluded" name="cateringIncluded">
                                Catering Included
                            </label>
                            <label>
                                <input type="checkbox" id="decorationsIncluded" name="decorationsIncluded">
                                Decorations Included
                            </label>
                        </div>
                        <div class="form-row">
                            <textarea id="specialRequests" name="specialRequests" placeholder="Special Requests" rows="2"></textarea>
                        </div>
                        <div class="form-row">
                            <textarea id="setupRequirements" name="setupRequirements" placeholder="Setup Requirements" rows="2"></textarea>
                        </div>
                    </div>

                    <div class="booking-section">
                        <h4>Payment Information</h4>
                        <div class="form-row">
                            <input type="number" id="totalAmount" name="totalAmount" placeholder="Total Amount (â‚¦)" readonly>
                            <input type="number" id="depositPaid" name="depositPaid" placeholder="Deposit Paid (â‚¦)" min="0">
                        </div>
                        <div class="form-row">
                            <textarea id="bookingNotes" name="notes" placeholder="Internal Notes" rows="2"></textarea>
                        </div>
                    </div>

                    <div class="availability-check" id="availabilityCheck">
                        <!-- Availability will be checked here -->
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-info" onclick="checkAvailability()">
                            <i class="fas fa-search"></i> Check Availability
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Create Booking
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('loungeBookingModal')">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Department Finance Modals -->
    
    <!-- New Department Modal -->
    <div id="departmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-building"></i> Create New Department</h3>
                <span class="close" onclick="closeModal('departmentModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="departmentForm" onsubmit="handleDepartmentSubmit(event)">
                    <div class="form-row">
                        <input type="text" id="deptName" placeholder="Department Name" required>
                        <input type="text" id="deptCode" placeholder="Department Code (e.g., FO, HK)" required maxlength="5" class="uppercase-input">
                    </div>
                    <div class="form-row">
                        <select id="deptCategory" required>
                            <option value="">Select Category</option>
                            <option value="Operations">Operations</option>
                            <option value="Food & Beverage">Food & Beverage</option>
                            <option value="Housekeeping">Housekeeping</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Administration">Administration</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Security">Security</option>
                            <option value="IT">IT</option>
                        </select>
                        <input type="number" id="deptBudget" placeholder="Monthly Budget (â‚¦)" min="0">
                    </div>
                    <div class="form-row">
                        <input type="text" id="deptManagerName" placeholder="Department Manager Name">
                        <input type="tel" id="deptManagerContact" placeholder="Manager Contact">
                    </div>
                    <div class="form-row">
                        <input type="number" id="deptCreditLimit" placeholder="Credit Limit (â‚¦)" min="0">
                    </div>
                    <div class="form-row">
                        <textarea id="deptDescription" placeholder="Department Description" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Create Department
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('departmentModal')">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- New Loan Modal -->
    <div id="loanModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3><i class="fas fa-handshake"></i> Create Inter-Department Loan</h3>
                <span class="close" onclick="closeModal('loanModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loanForm" onsubmit="handleLoanSubmit(event)">
                    <div class="loan-section">
                        <h4>Loan Parties</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Borrower Department:</label>
                                <select id="loanBorrowerDept" required>
                                    <option value="">Select Borrowing Department</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Lender Department:</label>
                                <select id="loanLenderDept" required>
                                    <option value="">Select Lending Department</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="loan-section">
                        <h4>Loan Terms</h4>
                        <div class="form-row">
                            <input type="number" id="loanAmount" placeholder="Principal Amount (â‚¦)" min="1" required>
                            <input type="number" id="loanInterestRate" placeholder="Annual Interest Rate (%)" min="0" max="100" step="0.1" value="5">
                        </div>
                        <div class="form-row">
                            <input type="number" id="loanTermDays" placeholder="Term (Days)" min="1" max="365" required>
                            <select id="loanPurpose" required>
                                <option value="">Select Purpose</option>
                                <option value="Equipment Purchase">Equipment Purchase</option>
                                <option value="Maintenance">Maintenance</option>
                                <option value="Salary Payment">Salary Payment</option>
                                <option value="Utility Bills">Utility Bills</option>
                                <option value="Emergency Expense">Emergency Expense</option>
                                <option value="Inventory Purchase">Inventory Purchase</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <textarea id="loanPurposeDescription" placeholder="Purpose Description" rows="2"></textarea>
                        </div>
                    </div>

                    <div class="loan-section">
                        <h4>Loan Summary</h4>
                        <div class="loan-summary" id="loanSummary">
                            <div class="summary-item">
                                <span>Principal Amount:</span>
                                <span id="summaryPrincipal">â‚¦0</span>
                            </div>
                            <div class="summary-item">
                                <span>Interest Amount:</span>
                                <span id="summaryInterest">â‚¦0</span>
                            </div>
                            <div class="summary-item">
                                <span>Total Amount Due:</span>
                                <span id="summaryTotal">â‚¦0</span>
                            </div>
                            <div class="summary-item">
                                <span>Due Date:</span>
                                <span id="summaryDueDate">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Create Loan
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('loanModal')">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Assignment Modal -->
    <div id="paymentAssignmentModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3><i class="fas fa-clipboard-list"></i> Create Payment Assignment</h3>
                <span class="close" onclick="closeModal('paymentAssignmentModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="paymentAssignmentForm" onsubmit="handlePaymentAssignmentSubmit(event)">
                    <div class="assignment-section">
                        <h4>Order Information</h4>
                        <div class="form-row">
                            <select id="assignmentOrderType" required onchange="loadOrdersForAssignment()">
                                <option value="">Select Order Type</option>
                                <option value="kitchen_order">Kitchen Order</option>
                                <option value="bar_order">Bar Order</option>
                                <option value="guest_order">Guest Order</option>
                                <option value="maintenance_request">Maintenance Request</option>
                                <option value="supply_order">Supply Order</option>
                                <option value="service_request">Service Request</option>
                            </select>
                            <select id="assignmentOrderId" required onchange="loadOrderDetails()">
                                <option value="">Select Order</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="number" id="assignmentOriginalAmount" placeholder="Original Amount (â‚¦)" readonly>
                            <select id="assignmentPriority">
                                <option value="normal">Normal Priority</option>
                                <option value="high">High Priority</option>
                                <option value="urgent">Urgent Priority</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="date" id="assignmentDueDate" required>
                            <select id="assignmentSplitCriteria" onchange="updateSplitMethod()">
                                <option value="custom">Custom Split</option>
                                <option value="equal">Equal Split</option>
                                <option value="percentage">Percentage Split</option>
                                <option value="usage_based">Usage Based</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <textarea id="assignmentReason" placeholder="Assignment Reason" required rows="2"></textarea>
                        </div>
                    </div>

                    <div class="assignment-section">
                        <h4>Department Assignments</h4>
                        <div class="assignments-container" id="assignmentsContainer">
                            <div class="assignment-row">
                                <select class="dept-select" required>
                                    <option value="">Select Department</option>
                                </select>
                                <input type="number" class="dept-amount" placeholder="Amount (â‚¦)" min="0" required>
                                <input type="number" class="dept-percentage" placeholder="%" min="0" max="100" readonly>
                                <button type="button" class="btn btn-danger btn-sm" onclick="removeAssignmentRow(this)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="assignment-actions">
                            <button type="button" class="btn btn-secondary" onclick="addAssignmentRow()">
                                <i class="fas fa-plus"></i> Add Department
                            </button>
                            <div class="assignment-total">
                                <strong>Total Assigned: â‚¦<span id="totalAssigned">0</span></strong>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Create Assignment
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('paymentAssignmentModal')">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js?v=2.1.0"></script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New content is available, prompt user to update
                                    if (confirm('New version available! Reload to update?')) {
                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Handle install prompt for PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWA install prompt available');
            e.preventDefault();
            deferredPrompt = e;
            
            // Show custom install button if you want
            showInstallPromotion();
        });

        function showInstallPromotion() {
            // Create install button if it doesn't exist
            if (!document.getElementById('installButton')) {
                const installButton = document.createElement('button');
                installButton.id = 'installButton';
                installButton.className = 'btn btn-primary install-btn';
                installButton.innerHTML = '<i class="fas fa-download"></i> Install App';
                installButton.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    z-index: 1000;
                    padding: 12px 20px;
                    background: #2c3e50;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    cursor: pointer;
                    font-family: Inter, sans-serif;
                    font-weight: 500;
                    transition: all 0.3s ease;
                `;
                
                installButton.addEventListener('click', installApp);
                installButton.addEventListener('mouseenter', () => {
                    installButton.style.transform = 'translateY(-2px)';
                    installButton.style.boxShadow = '0 6px 16px rgba(0,0,0,0.4)';
                });
                installButton.addEventListener('mouseleave', () => {
                    installButton.style.transform = 'translateY(0)';
                    installButton.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
                });
                
                document.body.appendChild(installButton);
                
                // Auto-hide after 10 seconds
                setTimeout(() => {
                    if (installButton && installButton.parentNode) {
                        installButton.style.opacity = '0';
                        setTimeout(() => installButton.remove(), 300);
                    }
                }, 10000);
            }
        }

        async function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
                
                // Remove install button
                const installButton = document.getElementById('installButton');
                if (installButton) {
                    installButton.remove();
                }
            }
        }

        // Handle app installation
        window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            deferredPrompt = null;
            
            // Remove install button if still visible
            const installButton = document.getElementById('installButton');
            if (installButton) {
                installButton.remove();
            }
            
            // Show success message
            if (typeof showAlert === 'function') {
                showAlert('App installed successfully! You can now use it offline.', 'success');
            }
        });

        // Handle online/offline status
        window.addEventListener('online', () => {
            if (typeof showAlert === 'function') {
                showAlert('Connection restored', 'success');
            }
        });

        window.addEventListener('offline', () => {
            if (typeof showAlert === 'function') {
                showAlert('You are offline. Some features may be limited.', 'warning');
            }
        });
    </script>
</body>
</html>
